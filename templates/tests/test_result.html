{% extends 'base.html' %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É{% endblock %}

{% block content %}
<div class="page-header text-center">
    <h1 class="page-title">
        {% if score >= 70 %}‚úÖ{% elif score >= 50 %}‚ö†Ô∏è{% else %}‚ùå{% endif %}
        –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç—É: {{ test.test_name }}
    </h1>
</div>

<div class="text-center mb-4">
    <div class="stat-item d-inline-block">
        <div class="stat-number" style="font-size: 3rem;">{{ score|floatformat:2 }}%</div>
        <div class="stat-label">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
    </div>
</div>

<div class="card-simple p-4 mb-4">
    <h4>üìä –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h4>
    <p><strong>–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:</strong> {{ correct_answers }} –∑ {{ total_questions }}</p>
    <p><strong>–û—Ü—ñ–Ω–∫–∞:</strong>
        {% if score >= 90 %}–í—ñ–¥–º—ñ–Ω–Ω–æ!
        {% elif score >= 70 %}–î–æ–±—Ä–µ!
        {% elif score >= 50 %}–ó–∞–¥–æ–≤—ñ–ª—å–Ω–æ
        {% else %}–ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –∑–Ω–∞–Ω–Ω—è
        {% endif %}
    </p>
</div>

<div class="card-simple p-4">
    <h4 class="mb-3">üìù –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π</h4>
    {% for answer_data in answers_data %}
    <div class="mb-3 p-3" style="border-left: 3px solid {% if answer_data.is_correct %}#10b981{% else %}#ef4444{% endif %}; background: #f8fafc;">
        <h6>{{ forloop.counter }}. {{ answer_data.question_text }}</h6>
        <p class="mb-1"><strong>–í–∞—à–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> {{ answer_data.selected_answer }}</p>
        {% if not answer_data.is_correct %}
        <p class="mb-0 text-success"><strong>–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> {{ answer_data.correct_answer }}</p>
        {% else %}
        <p class="mb-0 text-success">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!</p>
        {% endif %}
    </div>
    {% endfor %}
</div>

<div class="text-center mt-4">
    <a href="{% url 'test_list' %}" class="btn btn-primary">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É —Ç–µ—Å—Ç—ñ–≤</a>
</div>
{% endblock %}